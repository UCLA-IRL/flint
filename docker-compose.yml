networks:
  ndn_compute_net:
    driver: bridge
    ipam:
      config:
        - subnet: 192.168.1.0/24

services:
  nfd:
    build: ./cluster/nfd-node
    volumes:
       - ./cluster/nfd-node-config:/custom-config
    entrypoint: ["/usr/bin/nfd"]
    command: ["--config", "/custom-config/nfd.conf"]
    container_name: nfd1
    networks:
      ndn_compute_net:
        ipv4_address: 192.168.1.2
  driver:
    build: 
      context: ./
      dockerfile: ./cluster/driver/Dockerfile
    volumes:
      - ./cluster/driver/src:/app
    container_name: driver
    networks:
      ndn_compute_net:
        ipv4_address: 192.168.1.10
    ports:
      - "5214:5214"
    environment:
      - MANAGEMENT_PORT=5214
